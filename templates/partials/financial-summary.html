{% import 'macros/missing.html' as missing %}
{% import 'macros/cycle-select.html' as select %}
{% import 'macros/null.html' as null %}

  <div class="content__section">
    <div class="section__heading">
      <h2 class="heading__title">
        Financial Summary
        {{ select.cycle_select(cycles, cycle, id="cycle-1") }}
      </h2>
    </div>
    <p class="usa-width-two-thirds">Candidates receive and spend money through committees. These are the <strong>combined financial totals</strong> for all of this candidate's authorized committees. You can learn more about each committee's fundraising and spending on its page.</p>
  </div>
  {% if committees_authorized %}

  <div class="content__section">
    <figure class="usa-width-one-half">
      <h3 class="t-ruled--bottom">Combined Financial Totals</h3>
      <div class="is-right-aligned">
        <div>
          <h5 class="term t-data-header" data-term="Total Receipts">Total Receipts</h5>
          <span class="t-big-data">{{ null.null( aggregate.receipts | currency ) }}</span>
        </div>
        <div >
          <h5 class="term t-data-header" data-term="Total Disbursements">Total Disbursements</h5>
          <span class="t-big-data">{{ null.null( aggregate.disbursements | currency ) }}</span>
        </div>
        <div>
          <h5 class="term t-data-header" data-term="Ending Cash on Hand">Ending Cash on Hand</h5>
          <span class="t-big-data">{{ null.null( aggregate.cash | currency ) }}</span>
        </div>
        <div>
          <h5 class="term t-data-header" data-term="Debt">Debt</h5>
          <span class="t-big-data">{{ null.null( aggregate.debt | currency ) }}</span>
        </div>
        <p>Coverage Period {{ aggregate.start_date }}  {{ aggregate.end_date }}</p>
      </div>
    </figure>
    <div class="usa-width-one-half">
      <h3 class="t-ruled--bottom">Campaign Committees</h3>
      {% for committee in committee_groups['P'] %}
      <div class="callout callout--primary">
        <div class="callout__content">
          <h4 class="callout__title">
            <a href="{{ url_for('committee_page', c_id=committee.committee_id, cycle=cycle) }}">{{ committee.name }}</a>
          </h4>
          <span class="callout__subtitle">Principal Campaign Committee</span>
        </div>
        <div class="callout__action">
          <span class="t-block t-data">View detailed data:</span>
          <ul class="callout__sublinks">
            <li><a href="{{ url_for('committee_page', c_id=committee.committee_id, cycle=cycle) }}&tab=receipts">Money received &raquo;</a></li>
            <li><a href="{{ url_for('committee_page', c_id=committee.committee_id, cycle=cycle) }}&tab=disbursements">Money spent &raquo;</a></li>
            <li><a href="{{ url_for('committee_page', c_id=committee.committee_id, cycle=cycle) }}&tab=filings">Reports filed &raquo;</a></li>
          </ul>
          <a href="{{ url_for('committee_page', c_id=committee.committee_id, cycle=cycle) }}" class="callout__icon button">
            <img src="/static/img/i-arrow-right--primary-contrast.svg" alt="Arrow pointing to the right">
          </a>
        </div>
      </div>
      {% endfor %}
      {% if committee_groups['A'] | length > 0 %}
        {% for committee in committee_groups['A'] %}
        <div class="callout callout--neutral">
          <div class="callout__content">
            <h4 class="callout__title">
              <a href="{{ url_for('committee_page', c_id=committee.committee_id, cycle=cycle) }}">{{ committee.name }}</a>
            </h4>
            <span class="callout__subtitle">Authorized Campaign Committee</span>
          </div>
          <div class="callout__action">
            <span class="t-block t-data">View detailed data:</span>
            <ul class="callout__sublinks">
              <li><a href="{{ url_for('committee_page', c_id=committee.committee_id, cycle=cycle) }}&tab=receipts">Money received &raquo;</a></li>
              <li><a href="{{ url_for('committee_page', c_id=committee.committee_id, cycle=cycle) }}&tab=disbursements">Money spent &raquo;</a></li>
              <li><a href="{{ url_for('committee_page', c_id=committee.committee_id, cycle=cycle) }}&tab=filings">Reports filed &raquo;</a></li>
            </ul>
            <a href="{{ url_for('committee_page', c_id=committee.committee_id, cycle=cycle) }}" class="callout__icon button">
              <img src="/static/img/i-arrow-right--neutral-contrast.svg" alt="Arrow pointing to the right">
            </a>
          </div>
        </div>
        {% endfor %}
      {% endif %}
    </div>
  </div>

{% if committee_groups['J'] %}
  <div class="content__section">
    <h2 class="content__section__heading"><span class="term" data-term="Joint Fundraising Committee">Joint Fundraising Committees</span></h2>
    <div class="row">
      <p class="usa-width-two-thirds">In joint fundraising, a political committee raises funds with at least one other political committee or unregistered organization. Committees involved in joint fundraising share the costs of the fundraiser and divide up the money raised according to a ratio agreed to by the participants when the joint fundraising committee is formed.</p>
    </div>
    <ul class="list--bulleted">
      {% for committee in committee_groups['J'] %}
      <li>
          <a href="{{ url_for('committee_page', c_id=committee.committee_id, cycle=cycle) }}"><h5>{{ committee.name }}</h5></a>
      </li>
      {% endfor %}
    </ul>
  </div>
{% endif %}

{% else %}

  {{ missing.missing_financials('candidate', cycle) }}

{% endif %}
