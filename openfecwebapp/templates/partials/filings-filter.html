{% extends 'partials/filters.html' %}

{% import 'macros/filters/text.html' as text %}
{% import 'macros/filters/typeahead-filter.html' as typeahead %}
{% import 'macros/filters/states.html' as states %}
{% import 'macros/filters/years.html' as years %}
{% import 'macros/filters/date.html' as date %}

{% block heading %}
Filter reports
{% endblock %}

{% block filters %}
<div class="filters__inner">
  <fieldset class="filter toggles toggles--vertical js-filter js-toggle-filter js-table-switcher">
    <legend class="label t-inline-block">Data type</legend>
    <div class="tooltip__container">
      <button class="tooltip__trigger" type="button" aria-controls="data-type-tooltip"><span class="u-visually-hidden">Learn more</span></button>
      <div id="data-type-tooltip" role="tooltip" class="tooltip tooltip--under tooltip--left">
        <div class="tooltip__content">
          <strong>eFiling data</strong>
          <p class="tooltip__content">eFiling data is made available to the public quickly after a committee files a report electronically with the Commission. The information available in these files comes directly from the committee's report in a raw data format. Use processed data to access more comprehensive search options and all years of data.</p>
          <strong>Processed data</strong>
          <p class="tooltip__content">Processed data has been reviewed by the FEC using a multi-step process. This process can take days (for electronic filings) or weeks (for paper filings). Use processed data to comprehensively search all FEC data, which includes eFilings, once they're processed. Use eFiling data to access the most recent, raw information.</p>
        </div>
      </div>
    </div>
    <label for="switcher-processed" class="toggle">
      <input type="radio" class="toggle" value="processed" id="switcher-processed" checked name="data_type">
      <span class="button--alt">Processed data</span>
    </label>
    <label for="switcher-efilings" class="toggle">
      <input type="radio" class="toggle" value="efiling" id="switcher-efilings" name="data_type">
      <span class="button--alt">eFilings</span>
    </label>
  </fieldset>
</div>
<div class="js-accordion accordion--neutral" data-content-prefix="filter" data-open-first="true">
  <button type="button" class="js-accordion-trigger accordion__button">Filer</button>
  <div class="accordion__content">
    {{ typeahead.field('committee_id', 'Committee name or ID', '') }}
    {{ typeahead.field('candidate_id', 'Candidate name or ID', '', dataset='candidates') }}
  </div>

  <button type="button" class="js-accordion-trigger accordion__button">Filing date</button>
  <div class="accordion__content">
    {{ years.years('cycle', 'Years')  }}
    {{ date.field('receipt_date', 'Receipt date', dates ) }}
  </div>

  <button type="button" class="js-accordion-trigger accordion__button">Filing information</button>
  <div class="accordion__content">
    {% include 'partials/filters/amendment-indicator.html' %}
    {% include 'partials/filters/form-type.html' %}
  </div>
</div>
{% endblock %}
