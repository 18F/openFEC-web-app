{% import 'macros/missing.html' as missing %}
{% import 'macros/null.html' as null %}
{% import 'macros/cycle-select.html' as select %}

<section id="section-4" role="tabpanel" aria-hidden="true" aria-labelledby="section-1-heading">
  <div class="heading--section">
    <h2>Individual Contributions</h2>
  </div>

  <div class="content__section">
    {{ select.cycle_select(election_years, cycle, duration=duration, id="cycle-1") }}
  </div>

  <span class="t-sans t-bold">Data is included from these committees:</span>
  <ul class="list--bulleted">
    {% for committee in committee_groups['P'] | reverse %}
    <li>
      <a class="t-sans" href="{{ url_for('committee_page', c_id=committee.committee_id, cycle=cycle) }}">{{ committee.name }}</a>
    </li>
    {% endfor %}
  </ul>
  <div class="content__section">
    <div class="results-info results-info--simple">
      <div class="row">
        <fieldset class="toggles u-float-left">
          <legend class="label">Group by:</legend>
          <label for="toggle-all">
            <input id="toggle-all" type="radio" class="panel-toggle-control" name="individual-contributions" value="all-transactions" checked />
            <span class="button--alt">All transactions</span>
          </label>
          <label for="toggle-size">
            <input id="toggle-size" type="radio" class="panel-toggle-control" name="individual-contributions" value="contribution-size" />
            <span class="button--alt">Contribution size</span>
          </label>
          <label for="toggle-state">
            <input id="toggle-state" type="radio" class="panel-toggle-control" name="individual-contributions" value="contributor-state" />
            <span class="button--alt">Contributor state</span>
          </label>
        </fieldset>
        <a class="u-float-right button--alt button--browse"
            href="{{ url_for(
              'disbursements',
              committee_id=committee_id,
              two_year_transaction_period=cycle,
              min_date=cycle_start(cycle) | date(fmt='%m-%d-%Y'),
              max_date=cycle_end(cycle) | date(fmt='%m-%d-%Y'),
            ) }}">Filter this data
        </a>
      </div>

      <button type="button" class="js-export button button--cta button--export" data-export-for="individual-contributions">Export</button>

      <h3>Individual contributions by transaction</h3>

    </div>

    <table
        class="data-table data-table--heading-borders"
        data-type="individual-contributions"
        data-committee-id="{% for c in committee_groups['P'] | reverse %}{{ c.committee_id }}{% if not loop.last %},{% endif %}{% endfor %}"
        data-name="{{ name }}"
        data-cycle="{{ cycle }}"
      >
      <thead>
        <tr>
          <th scope="col">Contributor name</th>
          <th scope="col">Recipient</th>
          <th scope="col">Receipt date</th>
          <th scope="col">Amount</th>
        </tr>
      </thead>
    </table>
  </div>

</section>
