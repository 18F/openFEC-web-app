{% import 'macros/missing.html' as missing %}
{% import 'macros/null.html' as null %}
{% import 'macros/cycle-select.html' as select %}

<section id="section-3" role="tabpanel" aria-hidden="true" aria-labelledby="section-3-heading">
  <div class="heading--section">
    <h2 id="section-3-heading">Itemized Disbursements</h2>
  </div>

  <div class="content__section js-hide-subcycle">
    {{ select.cycle_select(election_years, cycle, duration=duration, id="cycle-3", show_two_year_period=True) }}
  </div>

  <span class="t-sans t-bold">Data is included from these committees:</span>

  <ul class="list--bulleted">
    {% for committee in committee_groups['P'] | reverse %}
    <li>
      <a class="t-sans" href="{{ url_for('committee_page', c_id=committee.committee_id, cycle=cycle) }}">{{ committee.name }}</a>
    </li>
    {% endfor %}
  </ul>

  <div class="content__section">
    <div class="results-info results-info--simple">
      <h3 class="u-no-margin">Disbursements by transaction</h3>

      {% if committee_groups['P']|length == 1 %}
      <a class="u-float-right button--alt button--browse"
          href="{{ url_for(
            'individual_contributions',
            committee_id=committee_groups['P'][0].committee_id,
            two_year_transaction_period=cycle,
            min_date=cycle_start(cycle) | date(fmt='%m-%d-%Y'),
            max_date=cycle_end(cycle) | date(fmt='%m-%d-%Y')
          ) }}">Filter this data</a>
      {% endif %}

      <ul>
        <li class="tag__category">
          <div class="tag__item">Report year: {{cycle - 1}} to {{cycle}}</div>
        </li>
      </ul>

      <button type="button" class="js-export button button--cta button--export" data-export-for="itemized-disbursements">Export</button>
    </div>

    <table
        class="data-table data-table--heading-borders"
        data-type="itemized-disbursements"
        data-committee-id="{% for c in committee_groups['P'] | reverse %}{{ c.committee_id }}{% if not loop.last %},{% endif %}{% endfor %}"
        data-name="{{ name }}"
        data-cycle="{{ cycle }}"
      >
      <thead>
        <tr>
          <th scope="col">Spender</th>
          <th scope="col">Recipient</th>
          <th scope="col">State</th>
          <th scope="col">Purpose</th>
          <th scope="col">Disbursement date</th>
          <th scope="col">Amount</th>
        </tr>
      </thead>
    </table>
  </div>

</section>
