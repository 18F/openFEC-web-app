{% import 'macros/reaction-box.html' as reaction_box %}

{% macro overview(data, verb, location) %}
  <div class="overview js-{{verb}}-overview">
    <div class="overview__totals js-totals">
      <div class="overview__total">
        <span class="overview__total-title">Total {{ verb }}</span>
        <span class="overview__total-number"><span class="figure__decimals" aria-hidden="true"></span>{{ data['total'] | currency }}</span>
      </div>
      <div class="overview__total">
        <div class="overview__total-title">
          <span class="term" data-term="candidate"><span class="swatch candidates"></span>Candidates</span>
        </div>
        <span class="overview__total-number">
          <span class="figure__decimals" aria-hidden="true"></span>{{ data['candidates'] | currency }}
        </span>
      </div>
      <div class="overview__total">
        <div class="overview__total-title">
          <span class="term" data-term="party committee"><span class="swatch parties"></span>Party committees</span>
        </div>
        <span class="overview__total-number">
          <span class="figure__decimals" aria-hidden="true"></span>{{ data['parties'] | currency }}
        </span>
      </div>
      <div class="overview__total">
        <div class="overview__total-title">
          <span class="term" data-term="political action committee (pac)"><span class="swatch pacs"></span>PACs</span>
        </div>
        <span class="overview__total-number">
          <span class="figure__decimals" aria-hidden="true"></span>{{ data['pacs'] | currency }}
        </span>
      </div>
      <div class="overview__total">
        <div class="overview__total-title">
          <span class="swatch other"></span>Other
        </div>
        <span class="overview__total-number">
          <span class="figure__decimals" aria-hidden="true"></span>{{ data['other'] | currency }}</a>
        </span>
      </div>
    </div>
    <div class="overview__chart js-chart">
    </div>
    <div class="overview__feedback">
      {{ reaction_box.reaction_box(verb, location)}}
    </div>
  </div>
{% endmacro %}

{% macro top(type, title, lower_title, raising_data, spending_data, name_field='committee_name', id_field='committee_id', route='committee_page') %}
  {% if type == 'candidates' %}
    {% set name_field='name' %}
    {% set id_field='candidate_id' %}
    {% set route='candidate_page' %}
  {% endif %}
  <div class="top-list js-top-list" data-type="{{type}}">
    <h2 class="top-list__title">{{ title }} overview</h2>
    <h3 class="top-list__subtitle">Top <span class="js-top-type">raising</span> (2015-2016)</h3>
    <div class="toggles--simple">
      <button class="toggle is-active" aria-controls="{{type}}-top-raising">Top raising</button> |
      <button class="toggle" aria-controls="{{type}}-top-spending">Top spending</button>
    </div>
    <ol class="figure--zero-pad js-top-raising" id="{{type}}-top-raising">
      {% for data in raising_data %}
      <li class="figure__item">
        <span class="figure__label">
          <a href="{{ url_for(route, c_id=data[id_field]) }}" title="{{ data[name_field] }}">{{ loop.index }}. {{ data[name_field] }}</a>
        </span>
        <span class="figure__number"><span class="figure__decimals" aria-hidden="true"></span>{{ data['receipts'] | currency }}</span>
      </li>
      {% endfor %}
    </ol>
    <ol class="figure--zero-pad js-top-spending" id="{{type}}-top-spending">
      {% for data in spending_data %}
      <li class="figure__item">
        <span class="figure__label">
          <a href="{{ url_for(route, c_id=data[id_field]) }}" title="{{ data[name_field] }}">{{ loop.index }}. {{ data[name_field] }}</a>
        </span>
        <span class="figure__number"><span class="figure__decimals" aria-hidden="true"></span>{{ data['disbursements'] | currency }}</span>
      </li>
      {% endfor %}
    </ol>
  </div>
{% endmacro %}
